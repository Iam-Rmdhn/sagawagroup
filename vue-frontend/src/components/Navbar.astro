---
// Navbar.astro
import sagawaLogo from '../assets/img/sagawa_logo.svg?url';

// Import gambar untuk dropdown produk kemitraan
import kagawaRicebowlImg from '../assets/img/gerobak/krb.png?url';
import kagawaCoffeeCornerImg from '../assets/img/gerobak/kcc.png?url';
import kagawaCoffeeRicebowlImg from '../assets/img/gerobak/kcrc.png?url';
import rmNusantaraImg from '../assets/img/gerobak/rmw.png?url';
import independantBrandImg from '../assets/img/gerobak/indepandent_brand.jpg?url';
---

<nav class="bg-white sticky top-0 z-50">
  <div class="max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <!-- Logo -->
      <div class="flex-shrink-0">
        <a href="/" class="flex items-center">
          <img src={sagawaLogo} alt="Sagawa Group Logo" class="h-10 w-auto mr-2" />
        </a>
      </div>

      <!-- Desktop Navigation (tidak berubah) -->
      <div class="hidden lg:flex">
        <div class="flex items-center space-x-6">
          <a href="/" class="nav-link flex items-center text-gray-600 px-2 py-2 text-sm font-medium transition-colors duration-200 relative">
            <svg class="w-4 h-4 mr-1 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"/>
            </svg>
            Beranda
          </a>
          
          <div class="relative">
            <a href="/mitra" class="nav-link flex items-center text-gray-600 px-2 py-2 text-sm font-medium transition-colors duration-200 relative">
              <svg class="w-4 h-4 mr-1 text-gray-600" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
                <path d="m11 17 2 2a1 1 0 1 0 3-3"/>
                <path d="m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4"/>
                <path d="m21 3 1 11h-2"/>
                <path d="M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3"/>
                <path d="M3 4h8"/>
              </svg>
              Produk Kemitraan
              <button id="desktop-mitra-arrow-button" class="ml-auto p-2">
                <svg id="desktop-mitra-arrow" class="w-4 h-4 text-gray-600 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7"/>
                </svg>
              </button>
            </a>
            <div id="desktop-mitra-menu" class="absolute z-10 opacity-0 invisible transform -translate-y-2 bg-white shadow-xl border border-gray-200 rounded-lg mt-2 min-w-full whitespace-nowrap transition-all duration-300 ease-linear w-96">
              <div class="p-4">
                <h3 class="text-sm font-semibold text-gray-900 mb-3 border-b border-gray-100 pb-2">Pilih Produk Kemitraan</h3>
                <div class="space-y-2">
                  <a href="/mitra/kagawa-ricebowl" class="group flex items-center p-3 rounded-lg hover:bg-gray-50 transition-all duration-200">
                    <div class="flex-shrink-0 mr-3">
                      <img src={kagawaRicebowlImg} alt="Kagawa Ricebowl" class="w-12 h-12 object-cover rounded-lg shadow-sm">
                    </div>
                    <div class="flex-1 min-w-0">
                      <p class="text-sm font-medium text-gray-900 group-hover:text-amber-600 transition-colors duration-200">Kagawa Ricebowl</p>
                      <p class="text-xs text-gray-500 line-clamp-2 font-normal leading-relaxed">Konsep rice bowl premium dengan cita rasa Jepang yang autentik dan berkualitas tinggi</p>
                    </div>
                  </a>
                  
                  <a href="/mitra/kagawa-coffee-corner" class="group flex items-center p-3 rounded-lg hover:bg-gray-50 transition-all duration-200">
                    <div class="flex-shrink-0 mr-3">
                      <img src={kagawaCoffeeCornerImg} alt="Kagawa Coffee Corner" class="w-12 h-12 object-cover rounded-lg shadow-sm">
                    </div>
                    <div class="flex-1 min-w-0">
                      <p class="text-sm font-medium text-gray-900 group-hover:text-amber-600 transition-colors duration-200">Kagawa Coffee Corner</p>
                      <p class="text-xs text-gray-500 line-clamp-2 font-normal leading-relaxed">Kedai kopi modern dengan menu specialty coffee dan light meals yang berkualitas</p>
                    </div>
                  </a>
                  
                  <a href="/mitra/kagawa-coffee-ricebowl" class="group flex items-center p-3 rounded-lg hover:bg-gray-50 transition-all duration-200">
                    <div class="flex-shrink-0 mr-3">
                      <img src={kagawaCoffeeRicebowlImg} alt="Kagawa Coffee & Ricebowl" class="w-12 h-12 object-cover rounded-lg shadow-sm">
                    </div>
                    <div class="flex-1 min-w-0">
                      <p class="text-sm font-medium text-gray-900 group-hover:text-amber-600 transition-colors duration-200">Kagawa Coffee & Ricebowl</p>
                      <p class="text-xs text-gray-500 line-clamp-2 font-normal leading-relaxed">Kombinasi sempurna coffee corner dan ricebowl dalam satu gerobak yang praktis</p>
                    </div>
                  </a>
                  
                  <a href="/mitra/rm-nusantara" class="group flex items-center p-3 rounded-lg hover:bg-gray-50 transition-all duration-200">
                    <div class="flex-shrink-0 mr-3">
                      <img src={rmNusantaraImg} alt="RM Nusantara" class="w-12 h-12 object-cover rounded-lg shadow-sm">
                    </div>
                    <div class="flex-1 min-w-0">
                      <p class="text-sm font-medium text-gray-900 group-hover:text-amber-600 transition-colors duration-200">RM Nusantara</p>
                      <p class="text-xs text-gray-500 line-clamp-2 font-normal leading-relaxed">Rumah makan dengan menu masakan nusantara yang lezat, terjangkau dan autentik</p>
                    </div>
                  </a>
                  
                  <a href="/mitra/indepandant-brand" class="group flex items-center p-3 rounded-lg hover:bg-gray-50 transition-all duration-200">
                    <div class="flex-shrink-0 mr-3">
                      <img src={independantBrandImg} alt="Independent Brand" class="w-12 h-12 object-cover rounded-lg shadow-sm">
                    </div>
                    <div class="flex-1 min-w-0">
                      <p class="text-sm font-medium text-gray-900 group-hover:text-amber-600 transition-colors duration-200">Independent Brand</p>
                      <p class="text-xs text-gray-500 line-clamp-2 font-normal leading-relaxed">Kembangkan brand Anda sendiri dengan dukungan penuh dari Sagawa Group</p>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>
          
          <a href="/menu" class="nav-link flex items-center text-gray-600 px-2 py-2 text-sm font-medium transition-colors duration-200 relative">
            <svg class="w-4 h-4 mr-1 text-gray-600" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
              <path d="M12 3V2"/>
              <path d="m15.4 17.4 3.2-2.8a2 2 0 1 1 2.8 2.9l-3.6 3.3c-.7.8-1.7 1.2-2.8 1.2h-4c-1.1 0-2.1-.4-2.8-1.2l-1.302-1.464A1 1 0 0 0 6.151 19H5"/>
              <path d="M2 14h12a2 2 0 0 1 0 4h-2"/>
              <path d="M4 10h16"/>
              <path d="M5 10a7 7 0 0 1 14 0"/>
              <path d="M5 14v6a1 1 0 0 1-1 1H2"/>
            </svg>
            Menu
          </a>
          
          <a href="/gallery" class="nav-link flex items-center text-gray-600 px-2 py-2 text-sm font-medium transition-colors duration-200 relative">
            <svg class="w-4 h-4 mr-1 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m3 16 5-7 6 6.5m6.5 2.5L16 13l-4.286 6M14 10h.01M4 19h16a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z"/>
            </svg>
            Galeri
          </a>
          
          <a href="/about" class="nav-link flex items-center text-gray-600 px-2 py-2 text-sm font-medium transition-colors duration-200 relative">
            <svg class="w-4 h-4 mr-1 text-gray-600" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
              <path d="M15 13a3 3 0 1 0-6 0"/>
              <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"/>
              <circle cx="12" cy="8" r="2"/>
            </svg>
            Tentang Kami
          </a>
                  
          <a href="/contact" class="nav-link flex items-center text-gray-600 px-2 py-2 text-sm font-medium transition-colors duration-200 relative">
            <svg class="w-4 h-4 mr-1 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.427 14.768 17.2 13.542a1.733 1.733 0 0 0-2.45 0l-.613.613a1.732 1.732 0 0 1-2.45 0l-1.838-1.84a1.735 1.735 0 0 1 0-2.452l.612-.613a1.735 1.735 0 0 0 0-2.452L9.237 5.572a1.6 1.6 0 0 0-2.45 0c-3.223 3.2-1.702 6.896 1.519 10.117 3.22 3.221 6.914 4.745 10.12 1.535a1.601 1.601 0 0 0 0-2.456Z"/>
            </svg>
            Kontak
          </a>
        </div>
      </div>

      <!-- Login/Dashboard Buttons (Desktop Only) -->
      <div class="hidden lg:flex items-center space-x-3">
        <!-- Desktop Login Button -->
        <a id="desktop-login-button" href="/login" class="flex bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm font-medium transition-all duration-300 items-center shadow-sm">
          Login
          <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m12.75 15 3-3m0 0-3-3m3 3h-7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
          </svg>
        </a>
        
        <!-- Desktop Dashboard Button -->
        <a id="desktop-dashboard-button" href="/dashboard" class="hidden bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm font-medium transition-all duration-300 items-center shadow-sm">
          Dashboard
          <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 0 0-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 0 1 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/>
          </svg>
        </a>
      </div>

        <!-- Mobile menu button (Mobile Only) -->
        <div class="lg:hidden">
          <button type="button" id="mobile-menu-button" class="text-gray-600 hover:text-red-500 focus:outline-none focus:text-red-500 p-2">
            <svg id="hamburger-icon" class="w-6 h-6 transition-all duration-300 ease-in-out" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
            <svg id="close-icon" class="w-6 h-6 transition-all duration-300 ease-in-out absolute opacity-0 scale-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <div id="mobile-menu" class="lg:hidden opacity-0 invisible transform -translate-y-2 fixed inset-x-0 top-16 bg-white z-50 shadow-lg border-t border-gray-200 transition-all duration-300 ease-out">
    <div class="w-full">
      <a href="/" class="mobile-nav-link flex items-center text-gray-600 hover:text-red-500 px-4 py-3 text-base font-medium w-full border-b border-gray-200 transition-colors duration-200">
        <svg class="w-4 h-4 mr-3 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"/>
        </svg>
        Beranda
      </a>
      
      <div class="border-b border-gray-200 w-full">
        <div class="flex items-center justify-between">
          <a href="/mitra" class="mobile-nav-link flex-grow flex items-center text-gray-600 hover:text-red-500 px-4 py-3 text-base font-medium transition-colors duration-200">
            <svg class="w-4 h-4 mr-3 text-gray-600" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
              <path d="m11 17 2 2a1 1 0 1 0 3-3"/>
              <path d="m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4"/>
              <path d="m21 3 1 11h-2"/>
              <path d="M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3"/>
              <path d="M3 4h8"/>
            </svg>
            Produk Kemitraan
          </a>
          <button id="mobile-mitra-button" class="p-3 pr-4 transition-all duration-200 hover:bg-gray-50 rounded-lg">
            <svg id="mobile-mitra-arrow" class="w-4 h-4 text-gray-600 transform transition-transform duration-300 ease-out" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7"/>
            </svg>
          </button>
        </div>
        <div id="mobile-mitra-menu" class="overflow-hidden transition-all duration-300 ease-out max-h-0 border-t border-gray-100">
          <a href="/mitra/kagawa-ricebowl" class="submenu-nav-link block py-2 text-sm text-gray-600 hover:text-red-500 pl-11 pr-4 transition-colors duration-200">Kagawa Ricebowl</a>
          <a href="/mitra/kagawa-coffee-corner" class="submenu-nav-link block py-2 text-sm text-gray-600 hover:text-red-500 pl-11 pr-4 transition-colors duration-200">Kagawa Coffee Corner</a>
          <a href="/mitra/kagawa-coffee-ricebowl" class="submenu-nav-link block py-2 text-sm text-gray-600 hover:text-red-500 pl-11 pr-4 transition-colors duration-200">Kagawa Coffee & Ricebowl</a>
          <a href="/mitra/rm-nusantara" class="submenu-nav-link block py-2 text-sm text-gray-600 hover:text-red-500 pl-11 pr-4 transition-colors duration-200">RM Nusantara</a>
          <a href="/mitra/indepandant-brand" class="submenu-nav-link block py-2 text-sm text-gray-600 hover:text-red-500 pl-11 pr-4 transition-colors duration-200">Independant Brand</a>
        </div>
      </div>
      
      <a href="/menu" class="mobile-nav-link flex items-center text-gray-600 hover:text-red-500 px-4 py-3 text-base font-medium w-full border-b border-gray-200 transition-colors duration-200">
        <svg class="w-4 h-4 mr-3 text-gray-600" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
          <path d="M12 3V2"/>
          <path d="m15.4 17.4 3.2-2.8a2 2 0 1 1 2.8 2.9l-3.6 3.3c-.7.8-1.7 1.2-2.8 1.2h-4c-1.1 0-2.1-.4-2.8-1.2l-1.302-1.464A1 1 0 0 0 6.151 19H5"/>
          <path d="M2 14h12a2 2 0 0 1 0 4h-2"/>
          <path d="M4 10h16"/>
          <path d="M5 10a7 7 0 0 1 14 0"/>
          <path d="M5 14v6a1 1 0 0 1-1 1H2"/>
        </svg>
        Menu
      </a>

      <a href="/gallery" class="mobile-nav-link flex items-center text-gray-600 hover:text-red-500 px-4 py-3 text-base font-medium w-full border-b border-gray-200 transition-colors duration-200">
        <svg class="w-4 h-4 mr-3 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"  d="m3 16 5-7 6 6.5m6.5 2.5L16 13l-4.286 6M14 10h.01M4 19h16a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z"/>
        </svg>
        Galeri
      </a>

      <a href="/about" class="mobile-nav-link flex items-center text-gray-600 hover:text-red-500 px-4 py-3 text-base font-medium w-full border-b border-gray-200 transition-colors duration-200">
        <svg class="w-4 h-4 mr-3 text-gray-600" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
          <path d="M15 13a3 3 0 1 0-6 0"/>
          <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"/>
          <circle cx="12" cy="8" r="2"/>
        </svg>
        Tentang Kami
      </a>

      <a href="/contact" class="mobile-nav-link flex items-center text-gray-600 hover:text-red-500 px-4 py-3 text-base font-medium w-full border-b border-gray-200 transition-colors duration-200">
        <svg class="w-4 h-4 mr-3 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.427 14.768 17.2 13.542a1.733 1.733 0 0 0-2.45 0l-.613.613a1.732 1.732 0 0 1-2.45 0l-1.838-1.84a1.735 1.735 0 0 1 0-2.452l.612-.613a1.735 1.735 0 0 0 0-2.452L9.237 5.572a1.6 1.6 0 0 0-2.45 0c-3.223 3.2-1.702 6.896 1.519 10.117 3.22 3.221 6.914 4.745 10.12 1.535a1.601 1.601 0 0 0 0-2.456Z"/>
        </svg>
        Kontak
      </a>

      <!-- Login/Dashboard Buttons for Mobile -->
      <div class="p-2 ml-4 border-t border-gray-200 space-y-2">
        <!-- Mobile Login Button -->
        <a id="mobile-login-button" href="/login" class="mobile-nav-link items-center font-medium text-center transition-all duration-300 ease-in disabled:opacity-50 disabled:shadow-none disabled:cursor-not-allowed data-[shape=pill]:rounded-full data-[width=full]:w-full focus:shadow-none text-sm rounded-md py-2 px-4 shadow-sm hover:shadow-md bg-red-500 text-white hover:bg-red-700">
          Login
          <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m12.75 15 3-3m0 0-3-3m3 3h-7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
          </svg>
        </a>
        
        <!-- Mobile Dashboard Button -->
        <a id="mobile-dashboard-button" href="/dashboard" class="mobile-nav-link items-center font-medium text-center transition-all duration-300 ease-in disabled:opacity-50 disabled:shadow-none disabled:cursor-not-allowed data-[shape=pill]:rounded-full data-[width=full]:w-full focus:shadow-none text-sm rounded-md py-2 px-4 shadow-sm hover:shadow-md bg-red-500 text-white hover:bg-red-700">
          Dashboard
          <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 0 0-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 0 1 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/>
          </svg>
        </a>
      </div>
    </div>
  </div>
</nav>

<style>
  a {
    font-weight: bold;
  }

  .nav-link-active,
  .mobile-nav-link-active {
    color: #e3342f;
  }

  /* Smooth transitions for auth buttons */
  #desktop-login-button,
  #desktop-dashboard-button,
  #mobile-login-button,
  #mobile-dashboard-button {
    transition: all 0.3s ease-in-out;
  }

  #desktop-mitra-arrow-button:focus {
    outline: none;
    box-shadow: none;
  }

  a:focus, button:focus {
    outline: none;
    box-shadow: none;
  }

  *:focus {
    outline: none !important;
    box-shadow: none !important;
  }

  #mobile-menu {
    position: fixed;
    left: 0;
    right: 0;
    width: 100vw;
    overflow-y: auto;
    max-height: calc(100vh - 4rem);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    margin: 0;
    padding: 0;
  }

  /* Mobile menu button icon transitions */
  #mobile-menu-button {
    position: relative;
  }

  #hamburger-icon.hide {
    opacity: 0;
    transform: rotate(90deg) scale(0);
  }

  #close-icon.show {
    opacity: 1;
    transform: rotate(0deg) scale(1);
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(0deg) scale(1);
  }

  #close-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-90deg) scale(0);
  }

  #mobile-menu > div {
    display: flex;
    flex-direction: column;
    width: 100%;
  }

  /* Enhanced dropdown animation states */
  #desktop-mitra-menu.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
  }

  /* Additional styling for the enhanced dropdown */
  #desktop-mitra-menu {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    backdrop-filter: blur(8px);
  }

  /* Line clamp utility for text truncation */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.4;
    max-height: calc(1.4em * 2); /* 2 lines with line-height 1.4 */
  }

  #mobile-menu.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  #mobile-mitra-menu.show {
    max-height: 300px; /* Adjust based on content */
  }

  /* Style untuk submenu */
  #mobile-mitra-menu {
    background-color: #f9fafb;
    width: 100%;
  }

  .mobile-nav-link-active {
    color: #e3342f !important;
    background-color: rgba(251, 146, 60, 0.1);
    border-left: 3px solid #e3342f;
    padding-left: calc(1rem - 3px) !important;
  }

  .mobile-nav-link-active svg {
    color: #e3342f !important;
  }

  .mobile-nav-link:hover svg {
    color: #e3342f;
  }

  .submenu-nav-link.submenu-nav-link-active {
    color: #e3342f !important;
    background-color: rgba(251, 146, 60, 0.1);
    border-left: 3px solid #e3342f;
    padding-left: calc(2.75rem - 3px) !important; 
  }

  .mobile-nav-link-active::before {
    content: none;
  }

  @media (min-width: 1024px) {
    .nav-link:hover,
    .nav-link.nav-link-active {
      color: #e3342f;
    }

    .nav-link:hover svg,
    .nav-link.nav-link-active svg {
      color: #e3342f;
    }

    .nav-link::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 25%;
      width: 0;
      height: 2px;
      background-color: #e3342f;
      transition: width 0.3s ease-in-out;
    }

    .nav-link:hover::after,
    .nav-link.nav-link-active::after {
      width: 50%;
    }
  }
</style>

<script>
  // Function to check if user is logged in
  function isUserLoggedIn() {
    // Check for authentication token in localStorage
    const token = localStorage.getItem('authToken') || localStorage.getItem('auth_token') || localStorage.getItem('token');
    const userSession = localStorage.getItem('userSession') || localStorage.getItem('user');
    
    // Return true if any authentication indicator exists
    return !!(token || userSession);
  }

  // Function to update auth buttons based on login status
  function updateAuthButtons() {
    const isLoggedIn = isUserLoggedIn();
    
    // Desktop button elements
    const desktopLoginButton = document.getElementById('desktop-login-button');
    const desktopDashboardButton = document.getElementById('desktop-dashboard-button');
    
    // Mobile button elements
    const mobileLoginButton = document.getElementById('mobile-login-button');
    const mobileDashboardButton = document.getElementById('mobile-dashboard-button');
    
    if (isLoggedIn) {
      // Hide login buttons and show dashboard buttons
      if (desktopLoginButton) {
        desktopLoginButton.style.display = 'none';
      }
      if (desktopDashboardButton) {
        desktopDashboardButton.style.display = 'flex';
      }
      
      if (mobileLoginButton) {
        mobileLoginButton.style.display = 'none';
      }
      if (mobileDashboardButton) {
        mobileDashboardButton.style.display = 'inline-flex';
      }
    } else {
      // Show login buttons and hide dashboard buttons
      if (desktopLoginButton) {
        desktopLoginButton.style.display = 'flex';
      }
      if (desktopDashboardButton) {
        desktopDashboardButton.style.display = 'none';
      }
      
      if (mobileLoginButton) {
        mobileLoginButton.style.display = 'inline-flex';
      }
      if (mobileDashboardButton) {
        mobileDashboardButton.style.display = 'none';
      }
    }
  }

  // Helper function to simulate login for testing
  function simulateLogin(token = 'test-auth-token') {
    localStorage.setItem('authToken', token);
    console.log('Login simulated, token set:', token);
    updateAuthButtons();
  }

  // Helper function to simulate logout for testing
  function simulateLogout() {
    localStorage.removeItem('authToken');
    localStorage.removeItem('auth_token');
    localStorage.removeItem('token');
    localStorage.removeItem('userSession');
    localStorage.removeItem('user');
    console.log('Logout simulated, all tokens removed');
    updateAuthButtons();
  }

  // Helper function to check current login status
  function checkLoginStatus() {
    const isLoggedIn = isUserLoggedIn();
    console.log('Login status:', isLoggedIn);
    console.log('Available tokens:', {
      authToken: localStorage.getItem('authToken'),
      auth_token: localStorage.getItem('auth_token'),
      token: localStorage.getItem('token'),
      userSession: localStorage.getItem('userSession'),
      user: localStorage.getItem('user')
    });
    return isLoggedIn;
  }

  // Expose functions globally for testing purposes (can be removed in production)
  if (typeof window !== 'undefined') {
    (window as any).simulateLogin = simulateLogin;
    (window as any).simulateLogout = simulateLogout;
    (window as any).updateAuthButtons = updateAuthButtons;
    (window as any).checkLoginStatus = checkLoginStatus;
  }

  // Toggle mobile menu with smooth animation
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const hamburgerIcon = document.getElementById('hamburger-icon');
  const closeIcon = document.getElementById('close-icon');

  if (mobileMenuButton && mobileMenu && hamburgerIcon && closeIcon) {
    mobileMenuButton.addEventListener('click', () => {
      if (mobileMenu.classList.contains('show')) {
        // Hide menu and show hamburger icon
        mobileMenu.classList.remove('show');
        hamburgerIcon.classList.remove('hide');
        closeIcon.classList.remove('show');
        setTimeout(() => {
          mobileMenu.style.pointerEvents = 'none';
        }, 300);
      } else {
        // Show menu and show close icon
        mobileMenu.style.pointerEvents = 'auto';
        mobileMenu.classList.add('show');
        hamburgerIcon.classList.add('hide');
        closeIcon.classList.add('show');
      }
    });

    // Close mobile menu when clicking outside
    document.addEventListener('click', (event) => {
      if (!mobileMenuButton.contains(event.target as Node) && !mobileMenu.contains(event.target as Node)) {
        mobileMenu.classList.remove('show');
        hamburgerIcon.classList.remove('hide');
        closeIcon.classList.remove('show');
        setTimeout(() => {
          mobileMenu.style.pointerEvents = 'none';
        }, 300);
      }
    });
  }

  // Toggle mobile mitra submenu with smooth animation
  const mobileMitraButton = document.getElementById('mobile-mitra-button');
  const mobileMitraMenu = document.getElementById('mobile-mitra-menu');
  const mobileMitraArrow = document.getElementById('mobile-mitra-arrow');

  if (mobileMitraButton && mobileMitraMenu && mobileMitraArrow) {
    mobileMitraButton.addEventListener('click', () => {
      if (mobileMitraMenu.classList.contains('show')) {
        // Hide submenu
        mobileMitraMenu.classList.remove('show');
        mobileMitraArrow.classList.remove('rotate-180');
      } else {
        // Show submenu
        mobileMitraMenu.classList.add('show');
        mobileMitraArrow.classList.add('rotate-180');
      }
    });
  }

  // Initialize auth buttons and set active nav link
  document.addEventListener('DOMContentLoaded', () => {
    // Update auth buttons based on login status
    updateAuthButtons();
    
    // Listen for storage changes to update buttons when user logs in/out in another tab
    window.addEventListener('storage', (event) => {
      if (event.key === 'authToken' || event.key === 'auth_token' || event.key === 'token' || event.key === 'userSession' || event.key === 'user') {
        updateAuthButtons();
      }
    });
    const navLinks = document.querySelectorAll('.nav-link');
    const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
    const currentPath = window.location.pathname;

    navLinks.forEach(link => {
      if (link instanceof HTMLAnchorElement) {
        const linkPath = new URL(link.href).pathname;
        if ((linkPath === '/' && currentPath === '/') || (linkPath !== '/' && currentPath.startsWith(linkPath))) {
          link.classList.add('nav-link-active');
        }
      }
    });

    mobileNavLinks.forEach(link => {
      if (link instanceof HTMLAnchorElement) {
        const linkPath = new URL(link.href).pathname;
        if (currentPath === linkPath) {
          link.classList.add('mobile-nav-link-active');
        }
      }
    });

    // Set active state untuk submenu links
    const submenuLinks = document.querySelectorAll('.submenu-nav-link');
    submenuLinks.forEach(link => {
      if (link instanceof HTMLAnchorElement) {
        const linkPath = new URL(link.href).pathname;
        if (currentPath === linkPath) {
          link.classList.add('submenu-nav-link-active');
        }
      }
    });

    // Handle active state for main /mitra link on desktop when on a subpage
    if (currentPath.startsWith('/mitra')) {
        const desktopMitraLink = document.querySelector('a#desktop-mitra-button');
        desktopMitraLink?.classList.add('nav-link-active');
    }

    // Handle active state for main /mitra link on mobile when on a subpage
    if (currentPath.startsWith('/mitra')) {
        const mainMobileMitraLink = document.querySelector('a.mobile-nav-link[href="/mitra"]');
        mainMobileMitraLink?.classList.add('mobile-nav-link-active');
    }


    // Automatically open the mobile submenu if on a mitra page with smooth animation
    if (currentPath.startsWith('/mitra')) {
      const mitraMenu = document.getElementById('mobile-mitra-menu');
      const arrow = document.getElementById('mobile-mitra-arrow');
      if (mitraMenu && arrow) {
        mitraMenu.classList.add('show');
        arrow.classList.add('rotate-180');
      }
    }
  });

  // Toggle desktop mitra submenu with smooth animation
  const desktopMitraButton = document.querySelector('a[href="/mitra"]');
  const desktopMitraArrowButton = document.getElementById('desktop-mitra-arrow-button');
  const desktopMitraMenu = document.getElementById('desktop-mitra-menu');
  const desktopMitraArrow = document.getElementById('desktop-mitra-arrow');

  if (desktopMitraArrowButton && desktopMitraMenu && desktopMitraArrow) {
    desktopMitraArrowButton.addEventListener('click', (event) => {
      event.preventDefault();
      event.stopPropagation();
      
      if (desktopMitraMenu.classList.contains('show')) {
        // Hide menu
        desktopMitraMenu.classList.remove('show');
        desktopMitraArrow.classList.remove('rotate-180');
      } else {
        // Show menu
        desktopMitraMenu.classList.add('show');
        desktopMitraArrow.classList.add('rotate-180');
      }
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', (event) => {
      if (desktopMitraButton && !desktopMitraButton.contains(event.target as Node) && !desktopMitraMenu.contains(event.target as Node)) {
        desktopMitraMenu.classList.remove('show');
        desktopMitraArrow.classList.remove('rotate-180');
      }
    });

    // Prevent dropdown from closing when clicking inside
    desktopMitraMenu.addEventListener('click', (event) => {
      event.stopPropagation();
    });
  }
</script>
